# Dragon Castle 
> Go 서버를 활용한 멀티플레이어 Action RPG 게임

## 📋 프로젝트 소개
![image](https://github.com/user-attachments/assets/1a8f1578-2cb2-42ce-9ac8-868d8c02cd8e)
![image](https://github.com/user-attachments/assets/17eecae8-bec3-44a8-aa58-49486a142698)

Go 서버와 Unity 클라이언트를 활용한 멀티플레이어 Action RPG로
다수의 플레이어가 접속하여 하나의 거대한 몬스터를 상대하는 게임입니다.
보스 1종류가 존재하며, 드래곤 형태를 가지고 있습니다. 서버에서 구현된 BT에 따라 다음 패턴을 결정하고 클라이언트에 정보를 보내 동작을 동기화하는 방식으로 작동합니다.
플레이어는 2종류가 존재하며, 창과 검을 사용합니다. 각각 플레이어 조작에 따라 발생하는 내용들을 서버로 보내, 다른 클라이언트와 위치,애니메이션 등의 정보를 동기화 하는 방식으로 작동합니다.
- 개발 기간: 2024.10.8~2024.11.21

## 👥 팀 구성
|이름|역할|담당|
|---|---|---|
|안태형|팀장|보스 관련 전반 개발, GO 서버 제작|
|문정인|팀원|플레이어 캐릭터 관련 전반 개발, 프로젝트 관리|

## 🛠 사용 기술
- Server: Go, Protocol Buffers
- Client: Unity, C#


## 🎮 게임 소개
### 게임 진행
- 플레이어는 검사와 창술사 중 하나의 직업을 선택하여 게임에 참여
- 협동을 통해 강력한 공격 패턴을 가진 보스를 처치하는 것이 목표

### 캐릭터 조작
- 이동: WASD키로 이동, 마우스로 시점 전환
- 기본 공격: 마우스 좌클릭으로 무기 기반 연계 공격
- 특수 공격: E키를 통해 캐릭터별 고유의 강력한 기술 사용
- 회피: Shift키로 이동 방향으로 빠르게 회피

## 📌 주요 기능 

### 1. BT 기반 보스 AI
- Go 서버에서 행동 트리(Behavior Tree)를 통해 보스의 AI 로직을 구현
- Sequence, Selector, MutuallyExclusiveSelector 등 다양한 노드 타입으로 구성
- 각 행동은 Success, Failure, Running 상태를 가지며 패턴 트래커를 통해 전투/추격 패턴의 반복 횟수 관리  
- 패턴별 쿨다운, 범위, 데미지 등의 고유 속성을 가진 3가지 타입의 근접 공격
- 브레스 형태의 원거리 투사체 공격과 광역 범위의 메테오 공격 패턴
- 보스와 플레이어 간의 거리, 각도, 체력 등 다양한 조건에 따른 패턴 결정

### 2. StateMachine 기반 캐릭터 시스템
- StateMachine을 통한 체계적인 캐릭터 상태 관리
- Move, Melee, Dash, Damaged 등 각 상태별 진입/퇴출 로직 구현
- 상태 간 전이 조건 설정과 입력 시스템 연동
- CharacterController 기반의 물리 기반 움직임 구현 
- 캐릭터의 현재 상태에 따른 애니메이션과 이펙트 제어
- 무적 시간, 경직 등 전투 관련 상태 처리

### 3. Protocol Buffer 기반 멀티플레이 시스템
- 프로토콜 버퍼를 활용한 효율적인 메시지 직렬화/역직렬화
- PlayerManager, MonsterManager를 통한 게임 객체 관리
- 다중 플레이어의 실시간 입장/퇴장 처리 시스템
- 플레이어 간 상호작용 정보의 실시간 동기화 

### 4. 전투/데미지 시스템
- SkillBase를 상속받는 스킬 클래스와 SkillManager를 통한 관리
- DamageMessage를 통한 데미지 정보 전달 및 타입별 처리
- 피격 위치와 방향을 고려한 넉백과 이펙트 처리 
- 데미지 범위,무적 시간,콤보 시스템,쿨타임 등 전투 관련 시스템 구현
- 공격 타입별 차별화된 이펙트와 사운드 처리

### 5. 이동 및 회전 시스템
- 가속도와 최대 속도를 적용한 자연스러운 이동 구현
- 회전 각도에 따른 애니메이션 분기 처리 (45도 이상: 애니메이션 회전, 미만: 즉시 회전)
- 시간 기반 델타타임과 보간을 활용한 부드러운 속도와 회전 변화
- 상태별 다른 가속도와 최대 속도를 도입한 전투 시스템
- 서버와 클라이언트 간의 위치/회전 동기화


## 🎥 시연 영상
[![프로젝트 시연](https://img.youtube.com/vi/UCZfeSfO8VE/0.jpg)](https://youtu.be/UCZfeSfO8VE)

